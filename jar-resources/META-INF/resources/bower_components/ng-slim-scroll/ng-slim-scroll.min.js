
angular.module("ngSlimScroll",[]).directive("slimScroll",["$window","$document","$timeout",function(e,d,a){var b="data-slim-scroll-init";var c={minHeight:25,wrapperClass:"slim-scroll-wrapper",scrollbarContainerClass:"slim-scroll-scrollbar-container",scrollbarClass:"slim-scroll-scrollbar",specialClass:"animate"};return{restrict:"A",transclude:true,replace:true,scope:{options:"="},template:'<div><div class="slim-scroll-wrapper" data-ng-transclude></div></div>',link:function(f,h){h.removeAttr(b);var g=angular.extend({},c,f.options);a(function(){var i=h.children()[0],u=angular.element(i);if(i.offsetHeight<i.scrollHeight){h.attr(b,"1");u.addClass(g.wrapperClass);var p=angular.element(e.document.createElement("div"));p.addClass(g.scrollbarContainerClass);var s=angular.element(e.document.createElement("div"));s.addClass(g.scrollbarClass);h.append(p);p.append(s);var t={},m=function(w){var v=document.documentElement.scrollTop;return w.getBoundingClientRect().top+(v?v:document.body.scrollTop)},n=function(w){var v=parseInt(s[0].style.top.replace("%",""))*w/100;return v?v:0},r=function(){t.height=p[0].offsetHeight;t.scrollHeight=i.scrollHeight;t.position=(t.height/t.scrollHeight)*100;t.scrollbarHeight=t.scrollHeight*t.height/100;t.scrollPosition=g.fixedHeight?(g.fixedHeight/t.height*100):(t.scrollbarHeight<g.minHeight?g.minHeight/t.height*100:t.position);t.remainder=100-t.scrollPosition;t.x=(t.scrollHeight-t.height)*((t.scrollPosition-t.position)/(100-t.position));t.heightRate=Math.abs((t.x/t.remainder)+(t.scrollHeight/100));s[0].style.height=t.scrollPosition+"%";t.reposition=n(t.height)},q=function(z){z=z||event;var w=z.target||event.srcElement,y=w.parentElement||w.parentNode;if(!t||y===p[0]){return}var v=z.pageY||event.clientY,x=((v-m(i.parentElement||i.parentNode))/t.height*100)-t.scrollPosition/2;if(x>t.remainder){x=t.remainder}else{if(x<0){x=0}}s[0].style.top=x+"%";i.scrollTop=x*t.heightRate;p.addClass(g.specialClass)},k=function(x){var w=e.getSelection?e.getSelection():e.document.selection;if(w){if(w.removeAllRanges){w.removeAllRanges()}else{if(w.empty){w.empty()}}}x=x||event;var v=x.currentTarget||x.srcElement;d.bind("mousemove",o);d.bind("mouseup",j);t.offsetTop=m(i);t.firstY=x.pageY||event.clientY;if(!t.reposition){t.reposition=n(t.height)}u.addClass("unselectable")},o=function(y){y=y||event;var v=y.pageY||y.clientY,x=(t.reposition+v-t.firstY)/t.height*100;if(t.remainder<x){x=t.remainder}if(!t.previousTop){t.previousTop=x+1}var w=x>=0&&t.firstY>t.offsetTop;if((t.previousTop>x&&w)||(w&&(i.scrollTop+t.height!==t.scrollHeight))){s[0].style.top=x+"%";t.previousTop=x;i.scrollTop=x*t.heightRate}p.removeClass(g.specialClass)},j=function(v){d.unbind("mousemove",o);d.unbind("mouseup",j);t.reposition=0;u.removeClass("unselectable");p.addClass(g.specialClass)},l=function(v){if(!t){return}p.removeClass(g.specialClass);s[0].style.top=i.scrollTop/t.heightRate+"%";p.addClass(g.specialClass)};if(g.keepFocus){u.attr("tabindex","-1");i.focus()}s.bind("mousedown",k);p.bind("click",q);u.bind("scroll",l);angular.element(e).bind("resize",r);r();f.$on("$destroy",function(){s.unbind("mousedown");p.unbind("click");u.unbind("scroll");angular.element(e).unbind("resize",r)})}})}}}]);

 
